# 清动家园交付文档

*清华大学软件学院软件工程 2020年秋 C03 组*

## 交付产品



## 产品目标

### 功能要求

### 性能要求

## 开发组织管理

### 过程管理

### 人员分工

### 开发环境

### 配置管理

## 系统设计

### 前端交互

### 后端模块

### 接口规范

### 数据库设计

## 重难点问题及其解决方法

## 测试总结

### 功能测试方法

### 缺陷汇总

### 性能测试方法

### 性能测试结果

## 系统部署

### 部署环境

Ubuntu Server 20.04 LTS 64位 服务器

### 容器部署

项目使用基于 Docker (version 19.03.13) 的容器部署方式。使用到的镜像为：

- python: 3.7 - 用于部署后端应用，容器暴露 8000 端口。
- mysql: 5.7 - 用于部署数据库，容器暴露 3306 端口，与后端共享一个网络，仅供后端访问。
- nginx: latest - 用于部署代理，映射主机的 80 和 443 端口，与后端共享一个网络。

为了信息安全，数据库的隐私设置使用``.env``文件进行配置。

### NGINX反向代理部署

###### 多进程和并发链接设置

项目的 nginx 代理配置了 2 个工作进程数（worker_processes），每个进程使用 **epoll** 进行性能优化，支持的最大并发链接数为1024/进程。

###### http/https 协议设置

代理限制了请求的Header大小不超过2k（否则会返回494错误）。

请求的主体部分（body）不得超过20M。

代理开放了用于http服务的80端口，以及用于https服务的443端口。http请求将会被重定向到https的端口，同时返回**http301**。单个https的会话过期时间为一天。https使用ssl协议进行加密。

###### 代理路径设置

代理对四种路径进行分发：

- / ：非以下类型的路径将被分发到前端Vue处，作为前端网站访问。
- /api ：后端接口使用的路径，转发到后端处理。
- /media ：图片、视频等文件的访问接口。
- /static ：静态文件服务。









