本次后端使用django框架的restfulAPI

数据库是Mysql

#### 开发部分

经过两次主要重构，第一次是将函数式的视图全部转化为类视图，第二次是重新抽象数据表并进行解耦。

开发过程中参考了面向资源编程的原则，在一个url下进行增删改查操查操作

主要使用了restful_framework以下工具类

serializer：序列化queryset，校验请求参数

authitication：验证请求者身份

premission：区分权限

filter：支持多条件筛选

pagination：进行分页操作

throttle：访问次数控制，在保证性能的前提下防止恶意操作等

validator：验证字段的最小单元

为了开发方便，在utils中定义了一些工具函数，另外还有用于定时刷新的函数

#### 开发难点

小程序端（用户使用）和网页端（管理员使用）共用数据表，存在本质上的耦合。

无论是用户还是管理员都有非常复杂的筛选要求，管理员能进行的许多操作非常复杂，会影响系统的很多部分。

存在系统级别的动态变化，如每天场馆的刷新（可能管理员做出了修改），更细粒度的有用户预订场地快要到达时间时应该向其发送提示，在用户违约时同样如此。除了难以实现外，同样难以测试。

前端为了满足交互需求，往往会需要几个表的数据共同组成一个展示的页面，部分组件的特性导致只能发送一次请求，或者发送多次请求时可能会出现一些问题，为此不得不牺牲一些restfulAPI的规范并保持扩展性。

#### 优势和缺陷

优势：完成了复杂的逻辑处理，并通过了手工和自动测试表现正常。对模块进行了较好的划分，尽可能的解耦了模块，保持了可扩展性。

劣势：restfulAPI返回太多无用的数据（前端多次吐槽），有些模块没有严格遵守restfulAPI的规范（如上所说），这些模块的可扩展性比较差，支持的功能也相对受限。

#### 后端人心声总结

下次再也不用restful了。